{"version":3,"file":"login.min.js","names":["window","Joomla","akeeba","Passwordless","document","interpolateParameters","object","prefix","arguments","length","encodedString","Object","keys","forEach","prop","_typeof","concat","encodeURIComponent","findField","form","fieldSelector","elInputs","querySelectorAll","lookForField","outerElement","elInput","elElement","parentElement","nodeName","elForms","i","handleLoginError","message","renderMessages","error","scrollTo","top","left","behavior","handleLoginChallenge","publicKey","arrayToBase64String","a","btoa","String","fromCharCode","apply","_toConsumableArray","base64url2base64","input","output","replace","pad","Error","Array","join","challenge","Uint8Array","from","atob","c","charCodeAt","allowCredentials","map","data","id","console","log","navigator","credentials","get","then","publicKeyCredential","type","rawId","response","authenticatorData","clientDataJSON","signature","userHandle","paths","getOptions","location","base","pathname","JSON","stringify","Text","_","login","formId","e","elFormContainer","getElementById","elUsername","elReturn","pluginParams","username","value","returnUrl","postBackData","option","group","plugin","format","akaction","encoding","request","url","method","onSuccess","rawResponse","jsonData","parse","onError","xhr","status","statusText","initLogin","loginButtons","slice","call","button","addEventListener","preventDefault","currentTarget","getAttribute"],"sources":["login.es6"],"sourcesContent":["/*!\n * @package   AkeebaPasswordlessLogin\n * @copyright Copyright (c)2018-2021 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   GNU General Public License version 3, or later\n */\n\nwindow.Joomla              = window.Joomla || {};\nwindow.akeeba              = window.akeeba || {};\nwindow.akeeba.Passwordless = window.akeeba.Passwordless || {};\n\n/**\n * Akeeba Passwordless Login client-side implementation\n *\n * This is the EcmaScript 6+ source of the client-side implementation. It is meant to be transpiled to ES5.1 (plain old\n * JavaScript) with Babel. The actual file being loaded can be found in dist/passwordless.js.\n */\n((Joomla, Passwordless, document) => {\n\t\"use strict\";\n\n\t/**\n\t * Converts a simple object containing query string parameters to a single, escaped query string.\n\t * This method is a necessary evil since Joomla.request can only accept data as a string.\n\t *\n\t * @param    object   {object}  A plain object containing the query parameters to pass\n\t * @param    prefix   {string}  Prefix for array-type parameters\n\t *\n\t * @returns  {string}\n\t */\n\tPasswordless.interpolateParameters = (object, prefix = '') => {\n\t\tlet encodedString = '';\n\n\t\tObject.keys(object).forEach((prop) => {\n\t\t\tif (typeof object[prop] !== 'object')\n\t\t\t{\n\t\t\t\tif (encodedString.length > 0)\n\t\t\t\t{\n\t\t\t\t\tencodedString += '&';\n\t\t\t\t}\n\n\t\t\t\tif (prefix === '')\n\t\t\t\t{\n\t\t\t\t\tencodedString += `${encodeURIComponent(prop)}=${encodeURIComponent(object[prop])}`;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tencodedString\n\t\t\t\t\t\t+= `${encodeURIComponent(prefix)}[${encodeURIComponent(prop)}]=${encodeURIComponent(\n\t\t\t\t\t\tobject[prop],\n\t\t\t\t\t)}`;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Objects need special handling\n\t\t\tencodedString += `${Passwordless.interpolateParameters(object[prop], prop)}`;\n\t\t});\n\n\t\treturn encodedString;\n\t};\n\n\t/**\n\t * Finds the first field matching a selector inside a form\n\t *\n\t * @param   {HTMLFormElement}  form           The FORM element\n\t * @param   {String}           fieldSelector  The CSS selector to locate the field\n\t *\n\t * @returns {Element|null}  NULL when no element is found\n\t */\n\tPasswordless.findField = (form, fieldSelector) => {\n\t\tconst elInputs = form.querySelectorAll(fieldSelector);\n\n\t\tif (!elInputs.length)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn elInputs[0];\n\t};\n\n\t/**\n\t * Find a form field described by the CSS selector fieldSelector.\n\t * The field must be inside a <form> element which is either the\n\t * outerElement itself or enclosed by outerElement.\n\t *\n\t * @param   {Element}  outerElement   The element which is either our form or contains our form.\n\t * @param   {String}   fieldSelector  The CSS selector to locate the field\n\t *\n\t * @returns {null|Element}  NULL when no element is found\n\t */\n\tPasswordless.lookForField = (outerElement, fieldSelector) => {\n\t\tlet elInput = null;\n\n\t\tif (!outerElement)\n\t\t{\n\t\t\treturn elInput;\n\t\t}\n\n\t\tconst elElement = outerElement.parentElement;\n\n\t\tif (elElement.nodeName === 'FORM')\n\t\t{\n\t\t\telInput = Passwordless.findField(elElement, fieldSelector);\n\n\t\t\treturn elInput;\n\t\t}\n\n\t\tconst elForms = elElement.querySelectorAll('form');\n\n\t\tif (elForms.length)\n\t\t{\n\t\t\tfor (let i = 0; i < elForms.length; i += 1)\n\t\t\t{\n\t\t\t\telInput = Passwordless.findField(elForms[i], fieldSelector);\n\n\t\t\t\tif (elInput !== null)\n\t\t\t\t{\n\t\t\t\t\treturn elInput;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n\n\t/**\n\t * A simple error handler.\n\t *\n\t * @param   {String}  message\n\t */\n\tPasswordless.handleLoginError = (message) => {\n\t\tJoomla.renderMessages({error: [message]});\n\n\t\twindow.scrollTo({top: 0, left: 0, behavior: 'smooth'});\n\t};\n\n\t/**\n\t * Handles the browser response for the user interaction with the authenticator. Redirects to an\n\t * internal page which handles the login server-side.\n\t *\n\t * @param {  Object}  publicKey     Public key request options, returned from the server\n\t */\n\tPasswordless.handleLoginChallenge = (publicKey) => {\n\t\tconst arrayToBase64String = (a) => btoa(String.fromCharCode(...a));\n\n\t\tconst base64url2base64 = (input) => {\n\t\t\tlet output = input\n\t\t\t\t.replace(/-/g, '+')\n\t\t\t\t.replace(/_/g, '/');\n\t\t\tconst pad  = output.length % 4;\n\t\t\tif (pad)\n\t\t\t{\n\t\t\t\tif (pad === 1)\n\t\t\t\t{\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'InvalidLengthError: Input base64url string is the wrong length to determine padding');\n\t\t\t\t}\n\t\t\t\toutput += new Array(5 - pad).join('=');\n\t\t\t}\n\t\t\treturn output;\n\t\t};\n\n\t\tif (!publicKey.challenge)\n\t\t{\n\t\t\tPasswordless.handleLoginError(Joomla.Text._(\"PLG_SYSTEM_PASSWORDLESS_ERR_INVALID_USERNAME\"));\n\n\t\t\treturn;\n\t\t}\n\n\t\tpublicKey.challenge = Uint8Array.from(\n\t\t\twindow.atob(base64url2base64(publicKey.challenge)), (c) => c.charCodeAt(0),\n\t\t);\n\n\t\tif (publicKey.allowCredentials)\n\t\t{\n\t\t\tpublicKey.allowCredentials = publicKey.allowCredentials.map((data) => {\n\t\t\t\tdata.id = Uint8Array.from(window.atob(base64url2base64(data.id)), (c) => c.charCodeAt(0));\n\t\t\t\treturn data;\n\t\t\t});\n\t\t}\n\n\t\tconsole.log(publicKey);\n\n\t\tnavigator.credentials.get({publicKey})\n\t\t\t.then((data) => {\n\t\t\t\tconst publicKeyCredential = {\n\t\t\t\t\tid:       data.id,\n\t\t\t\t\ttype:     data.type,\n\t\t\t\t\trawId:    arrayToBase64String(new Uint8Array(data.rawId)),\n\t\t\t\t\tresponse: {\n\t\t\t\t\t\tauthenticatorData: arrayToBase64String(new Uint8Array(data.response.authenticatorData)),\n\t\t\t\t\t\tclientDataJSON:    arrayToBase64String(new Uint8Array(data.response.clientDataJSON)),\n\t\t\t\t\t\tsignature:         arrayToBase64String(new Uint8Array(data.response.signature)),\n\t\t\t\t\t\tuserHandle:        data.response.userHandle ? arrayToBase64String(\n\t\t\t\t\t\t\tnew Uint8Array(data.response.userHandle),\n\t\t\t\t\t\t) : null,\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\t// Send the response to your server\n\t\t\t\tconst paths     = Joomla.getOptions('system.paths');\n\t\t\t\twindow.location =\n\t\t\t\t\t`${paths ? `${paths.base}/index.php` : window.location.pathname}?${Joomla.getOptions(\n\t\t\t\t\t\t'csrf.token')}=1&option=com_ajax&group=system&plugin=passwordless`\n\t\t\t\t\t+ `&format=raw&akaction=login&encoding=redirect&data=${\n\t\t\t\t\t\tbtoa(JSON.stringify(publicKeyCredential))}`;\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\t// Example: timeout, interaction refused...\n\t\t\t\tPasswordless.handleLoginError(error);\n\t\t\t});\n\t};\n\n\t/**\n\t * Initialize the passwordless login, going through the server to get the registered certificates\n\t * for the user.\n\t *\n\t * @param   {string}   formId       The login form's or login module's HTML ID\n\t *\n\t * @returns {boolean}  Always FALSE to prevent BUTTON elements from reloading the page.\n\t */\n\t// eslint-disable-next-line no-unused-vars\n\tPasswordless.login = (formId) => {\n\t\tconst elFormContainer = document.getElementById(formId);\n\t\tconst elUsername      = Passwordless.lookForField(elFormContainer, 'input[name=username]');\n\t\tconst elReturn        = Passwordless.lookForField(elFormContainer, 'input[name=return]');\n\t\tconst pluginParams    = Joomla.getOptions('plg_system_passwordless');\n\t\tconst allowNoUsername = true;\n\n\t\tif (!allowNoUsername && elUsername === null)\n\t\t{\n\t\t\tPasswordless.handleLoginError(Joomla.Text._(\"PLG_SYSTEM_PASSWORDLESS_ERR_CANNOT_FIND_USERNAME\"));\n\n\t\t\treturn false;\n\t\t}\n\n\t\tconst username  = elUsername?.value ?? '';\n\t\tconst returnUrl = elReturn ? elReturn.value : null;\n\n\t\t// Get the Public Key Credential Request Options (challenge and acceptable public keys)\n\t\tconst postBackData                            = {\n\t\t\toption:   \"com_ajax\",\n\t\t\tgroup:    \"system\",\n\t\t\tplugin:   \"passwordless\",\n\t\t\tformat:   \"raw\",\n\t\t\takaction: \"challenge\",\n\t\t\tencoding: \"raw\",\n\t\t\tusername,\n\t\t\treturnUrl,\n\t\t};\n\t\tpostBackData[Joomla.getOptions('csrf.token')] = 1;\n\n\t\tconst paths = Joomla.getOptions('system.paths');\n\t\tconsole.log(paths);\n\n\t\tJoomla.request({\n\t\t\turl:    `${paths ? `${paths.base}/index.php` : window.location.pathname}?${Joomla.getOptions(\n\t\t\t\t'csrf.token')}=1`,\n\t\t\tmethod: \"POST\",\n\t\t\tdata:   Passwordless.interpolateParameters(postBackData),\n\t\t\tonSuccess(rawResponse)\n\t\t\t{\n\t\t\t\tlet jsonData = {};\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tjsonData = JSON.parse(rawResponse);\n\t\t\t\t}\n\t\t\t\tcatch (e)\n\t\t\t\t{\n\t\t\t\t\t/**\n\t\t\t\t\t * In case of JSON decoding failure fall through; the error will be handled in the login\n\t\t\t\t\t * challenge handler called below.\n\t\t\t\t\t */\n\t\t\t\t}\n\n\t\t\t\tif (jsonData.error)\n\t\t\t\t{\n\t\t\t\t\tPasswordless.handleLoginError(jsonData.error);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconsole.log(jsonData);\n\n\t\t\t\tPasswordless.handleLoginChallenge(jsonData);\n\t\t\t},\n\t\t\tonError: (xhr) => {\n\t\t\t\tPasswordless.handleLoginError(`${xhr.status} ${xhr.statusText}`);\n\t\t\t},\n\t\t});\n\n\t\treturn false;\n\t};\n\n\tPasswordless.initLogin = () => {\n\t\tconst loginButtons = [].slice.call(document.querySelectorAll(\".plg_system_passwordless_login_button\"));\n\n\t\tif (loginButtons.length)\n\t\t{\n\t\t\tloginButtons.forEach((button) => {\n\t\t\t\tbutton.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tconst currentTarget = e.currentTarget;\n\n\t\t\t\t\tPasswordless.login(\n\t\t\t\t\t\tcurrentTarget.getAttribute(\"data-passwordless-form\")\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\t// Initialization. Runs on DOM content loaded since this script is always loaded deferred.\n\tPasswordless.initLogin();\n\n})(Joomla, window.akeeba.Passwordless, document);\n"],"mappings":"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"}